<link rel="import" href="../polymer/polymer-element.html">

<script>
  /**
   * With `default-value` you can set a default value in a declarative way.
   *
   * ```
   * <default-value default-value="view1" input="[[routeData.page]]" output="{{page}}"></default-value>
   * ```
   *
   * You can use `default-value` also as an **or** condition for a value (`input || default-value`).
   *
   *
   *
   * @customElement
   * @polymer
   * @demo demo/default-value.html
   */
  class DefaultValue extends (Polymer.Element) {
    constructor() {
      super();
    }

    static get is() {
      return 'default-value';
    }

    static get properties() {
      return {
        /**
         * If this value is not set or falsy, the default-value is used.
         */
        input: {type: Object, observer: '_setOut'},
        /**
         * The default value which is used when input is falsy
         */
        defaultValue: {type: Object, observer: '_setOut'},
        /**
         * The output
         */
        output: {type: Object, notify: true},
      };
    }

    /**
     * Sets the default value to output
     */
    setDefault() {
      this.set('output', this.defaultValue);
    }

    /**
     * set output value with default or input value if defined
     * @param input
     * @private
     */
    _setOut(input) {
      if (!this.input) {
        this.set('output', this.defaultValue);
      } else {
        this.set('output', input);
      }
    }
  }

  window.customElements.define(DefaultValue.is, DefaultValue);

</script>
